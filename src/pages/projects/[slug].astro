---
import { projects } from "../../data/projects.js";

export function getStaticPaths() {
  return projects.map(p => ({ params: { slug: p.slug } }));
}

const { slug } = Astro.params;
const project = projects.find(p => p.slug === slug);

if (!project) throw new Error("Project not found: " + slug);
---

<html lang="fr">
  <head><title>{project.title}</title></head>
  <body>
    <a href="/projects">‚Üê Back</a>
    <h1>{project.title}</h1>
    <p><b>{project.category}</b></p>
    <p>{project.summary}</p>

    <h2>Stack</h2>
    <ul>
      {project.stack.map(s => <li>{s}</li>)}
    </ul>

    <h2>Links</h2>
    <ul>
      <li><a href={project.links.repo} target="_blank">Repository</a></li>
      <li><a href={project.links.demo} target="_blank">Live demo</a></li>
    </ul>

    <h2>Showcase</h2>
    {project.showcase?.type === "iframe" ? (
      <iframe
        src={project.showcase.url}
        style="width:100%;height:760px;border:1px solid #ddd;border-radius:12px;"
      />
    ) : (
      <p>No showcase configured.</p>
    )}
  </body>
</html>
