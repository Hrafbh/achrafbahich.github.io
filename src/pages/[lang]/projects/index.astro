---
import SiteLayout from "../../../layouts/SiteLayout.astro";
import { allLangs, type Lang } from "../../../i18n/config";
import { t } from "../../../i18n/ui";
import ProjectCard from "../../../components/ProjectCard.astro";
import { projects } from "../../../data/projects";

export async function getStaticPaths() {
  return allLangs.map((lang) => ({ params: { lang } }));
}

const lang = Astro.params.lang as Lang;
---
<SiteLayout lang={lang} title={`${t(lang, "projects_title")} — ${t(lang, "site_title")}`}>
  <section style="margin-bottom:14px;">
    <h1 style="margin:0 0 6px; font-size:22px;">{t(lang, "projects_title")}</h1>
    <p style="margin:0; opacity:.72;">
      {lang === "fr"
        ? "Tous les projets, avec un rendu adapté selon le type de showcase."
        : "All projects, with tailored rendering depending on showcase type."}
    </p>
  </section>

  <div class="grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
    {projects.map((p) => <ProjectCard lang={lang} project={p} />)}
  </div>

  <style>
    @media (max-width: 900px) {
      div[style*="grid-template-columns"] { grid-template-columns: 1fr !important; }
    }
  </style>
</SiteLayout>
