---
import SiteLayout from "../../../layouts/SiteLayout.astro";
import { allLangs, type Lang } from "../../../i18n/config";
import { t } from "../../../i18n/ui";

export async function getStaticPaths() {
  return allLangs.map((lang) => ({ params: { lang } }));
}

const lang = Astro.params.lang as Lang;

// Placeholders commit #1 (commit #2 branchera la vraie data)
const projects = Array.from({ length: 9 }).map((_, i) => ({
  title: `${t(lang, "placeholder_project")} ${i + 1}`,
  desc: t(lang, "placeholder_desc"),
  href: `/${lang}/projects/`,
}));
---
<SiteLayout lang={lang} title={`${t(lang, "projects_title")} — ${t(lang, "site_title")}`}>
  <section style="margin-bottom:14px;">
    <h1 style="margin:0 0 6px; font-size:22px;">{t(lang, "projects_title")}</h1>
    <p style="margin:0; opacity:.72;">
      {lang === "fr"
        ? "Grille de projets (alimentée par la data au commit #2)."
        : "Projects grid (powered by data in commit #2)."}
    </p>
  </section>

  <div class="grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
    {projects.map((p) => (
      <a class="card" href={p.href} style="padding:16px; display:block;">
        <div style="font-weight:700; margin-bottom:6px;">{p.title}</div>
        <div style="opacity:.72; font-size:14px; line-height:1.4;">{p.desc}</div>
      </a>
    ))}
  </div>

  <style>
    @media (max-width: 900px) {
      div[style*="grid-template-columns"] { grid-template-columns: 1fr !important; }
    }
  </style>
</SiteLayout>
