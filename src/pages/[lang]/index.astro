---
import SiteLayout from "../../layouts/SiteLayout.astro";
import { allLangs, type Lang } from "../../i18n/config";
import { t } from "../../i18n/ui";
import ProjectCard from "../../components/ProjectCard.astro"; // Importing ProjectCard component
import { projects } from "../../data/projects"; // Adjust the path as necessary

export async function getStaticPaths() {
  return allLangs.map((lang) => ({ params: { lang } }));
}

const lang = Astro.params.lang as Lang;

// Placeholder (commit #2 branchera la vraie data projects)
const featured = projects.filter((p) => p.featured).slice(0, 3);
---
<SiteLayout lang={lang} title={t(lang, "site_title")} description={t(lang, "hero_subtitle")}>
  <section class="card" style="padding:22px;">
    <h1 style="margin:0 0 10px; font-size:28px;">
      {t(lang, "hero_title")}
    </h1>
    <p style="margin:0; opacity:.78; max-width:70ch;">
      {t(lang, "hero_subtitle")}
    </p>

    <div style="margin-top:16px;">
      <a class="btn" href={`/${lang}/projects/`}>{t(lang, "cta_view_all")}</a>
    </div>
  </section>

  <section style="margin-top:18px;">
    <h2 style="margin:0 0 12px; font-size:18px; opacity:.9;">
      {t(lang, "featured_title")}
    </h2>

    <div class="grid grid-3">
      {featured.map((p) => <ProjectCard lang={lang} project={p} />)}
    </div>
  </section>
</SiteLayout>
